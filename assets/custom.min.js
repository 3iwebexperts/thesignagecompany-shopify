$(document).ready(function () {
  $('[data-fancybox="vid"]').fancybox({
    buttons: ["slideShow", "thumbs", "zoom", "fullScreen", "close"],
    loop: false,
    protect: true,
  });

  $('[data-fancybox="projgallery"]').fancybox({
    buttons: ["close"],
    wheel: true,
    transitionEffect: "slide",
    thumbs: true,
    hash: true,
    loop: true,
    keyboard: true,
    toolbar: true,
    animationEffect: true,
    arrows: true,
    zoom: true,
    autoSize: false,
    image: {
      preload: false,
    },
    beforeShow: function () {
      this.title = $(this.element).data("caption");
    },
  });

  function getColumnPositionBasedOnVisibility(sectionVisibilityPercentage) {
    //console.log("section visibility run");
    return (200 * sectionVisibilityPercentage) / 100;
  }

  function handleScroll() {
    //console.log("our projects load");
    const $projectsList = $(".projects_list");

    if ($projectsList.length === 0) {
      return;
    }

    const top_of_element = $projectsList.offset().top;
    const bottom_of_element = top_of_element + $projectsList.outerHeight();
    const bottom_of_screen = $(window).scrollTop() + $(window).innerHeight();
    const top_of_screen = $(window).scrollTop();
    const sectionHeight = bottom_of_element - top_of_element;

    if (
      bottom_of_screen > top_of_element &&
      top_of_screen < bottom_of_element
    ) {
      const halfOfSectionHeight = sectionHeight * 5;
      const sectionVisibilityPercentage =
        ((bottom_of_screen - top_of_element) / halfOfSectionHeight) * 100;
      const columnPosition = getColumnPositionBasedOnVisibility(
        sectionVisibilityPercentage
      );

      $(".column_two").css(
        "transform",
        "translate3d(0px, " + columnPosition * 2 + "px, 0px)"
      );
    }
  }

  $(window).scroll(handleScroll);
  $(window).on("load", handleScroll);

  // function getColumnPositionBasedOnVisibility(sectionVisibilityPercentage) {
  //   return (200 * sectionVisibilityPercentage) / 100;
  // }

  // $(window).scroll(function () {

  //   const $projectsList = $(".projects_list");

  //   if ($projectsList.length === 0) {
  //     return;
  //   }
  //   const top_of_element = $projectsList.offset().top;
  //   const bottom_of_element = top_of_element + $projectsList.outerHeight();
  //   const bottom_of_screen = $(window).scrollTop() + $(window).innerHeight();
  //   const top_of_screen = $(window).scrollTop();
  //   const sectionHeight = bottom_of_element - top_of_element;

  //   if (
  //     bottom_of_screen > top_of_element &&
  //     top_of_screen < bottom_of_element
  //   ) {
  //     const halfOfSectionHeight = sectionHeight * 5;
  //     const sectionVisibilityPercentage =
  //       ((bottom_of_screen - top_of_element) / halfOfSectionHeight) * 100;
  //     const columnPosition = getColumnPositionBasedOnVisibility(
  //       sectionVisibilityPercentage
  //     );

  //     $(".column_two").css(
  //       "transform",
  //       "translate3d(0px, " + columnPosition * 2 + "px, 0px)"
  //     );
  //   }
  // });

  var myElement = document.getElementById("stepline");

  function isParentDivInViewport(el) {
    var parentDiv = el.parentNode;
    var rect = parentDiv.getBoundingClientRect();
    var windowHeight =
      window.innerHeight || document.documentElement.clientHeight;
    var windowWidth = window.innerWidth || document.documentElement.clientWidth;
    var vertInView = rect.top >= 0 && rect.top + rect.height <= windowHeight;
    var horInView = rect.left >= 0 && rect.left + rect.width <= windowWidth;
    return vertInView && horInView;
  }

  function checkIfParentDivIsInViewport() {
    if (isParentDivInViewport(myElement)) {
      myElement.classList.add("visible");
      //console.log('Parent div is in full view');
    } else {
      //console.log('Parent div is not in full view');
    }
  }

  if (myElement != null && myElement !== undefined) {
    window.addEventListener("scroll", checkIfParentDivIsInViewport);
  }
});

jQuery(window).on("load", function (e) {
  menu_tt();
  custom_effect();
  banner_effect();

  if (window.screen.width >= 456 && window.screen.width <= 749) {
    slide_height();
  }
});

$(window).on("resize orientationchange", function () {
  jQuery(".menu_item h4").removeAttr("style");
  menu_tt();

  if (window.screen.width >= 456 && window.screen.width <= 749) {
    slide_height();
  }
});

function slide_height() {
  var header = parseFloat(jQuery(".section-header").height());
  var windowHeight = $(window).height();
  var myheight = windowHeight - header;
  //console.log("headerhh=",header);
  //console.log("myheight=",myheight);
  jQuery(".index-video").css("height", myheight);
}

function menu_tt() {
  var highestBox = 0;
  jQuery(".menu_item h4").each(function () {
    if (jQuery(this).height() > highestBox) {
      highestBox = jQuery(this).height();
    }
  });
  jQuery(".menu_item h4").height(highestBox);
}

function custom_effect() {
  var effectItems = [].slice.call(document.querySelectorAll(".backimg"));
  if ("IntersectionObserver" in window) {
    let effectObserver = new IntersectionObserver(function (entries, observer) {
      entries.forEach(function (entry) {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
          effectObserver.unobserve(entry.target);
        }
      });
    });
    effectItems.forEach(function (effectItem) {
      effectObserver.observe(effectItem);
    });
  }
}

function banner_effect() {
  var bannerItems = [].slice.call(
    document.querySelectorAll("#section2.banner__media img")
  );
  //console.log("banneritems",bannerItems);
  if ("IntersectionObserver" in window) {
    let bannerObserver = new IntersectionObserver(function (entries, observer) {
      entries.forEach(function (entry) {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
          bannerObserver.unobserve(entry.target);
        }
      });
    });
    bannerItems.forEach(function (bannerItem) {
      bannerObserver.observe(bannerItem);
    });
  }
}

$(document).ready(function () {
  $('.vid_container a[href^="#"]').on("click", function (e) {
    e.preventDefault();
    var target = this.hash;
    var $target = $(target);
    $("html, body")
      .stop()
      .animate(
        {
          scrollTop: $target.offset().top,
        },
        1400,
        "swing",
        function () {}
      );
  });
});

document.addEventListener("shopify:section:load", custom_effect);
document.addEventListener("shopify:section:load", banner_effect);

jQuery(window).on("load", function (e) {
  //design_height();
});

function design_height() {
  var header1 = parseFloat(jQuery(".section-header").height());
  var header2 = parseFloat(jQuery(".trust-icns").height());
  var header = header1 + header2;
  var windowHeight = $(window).height();
  if (windowWidth > 749) {
    var myheight = windowHeight - 0;
    // console.log("design_height=",myheight);
    jQuery(".mainarea").css("height", myheight);
  }
}

jQuery(window).on("load", function (e) {
  var bw = $(window).width();
  var main_contain = parseFloat(jQuery(".header.page-width").width());
  var main_contain1 = (bw - main_contain) / 2;
  // console.log("padding-left:",main_contain1);
  // $(".custom_mega_menu .left_side").css("padding-left", main_contain1);
  //$(".custom_mega_menu .right_side").css("padding-left", main_contain1);
});

$(document).ready(function () {

  var $swiperSelector = $('.slider_items');
  var dragSize = $swiperSelector.data('drag-size') ? $swiperSelector.data('drag-size') : 'auto';
  
  var swiper = new Swiper(".slider_items", {
    observer: true,
    observeParents: true,
    parallax: true,
    slidesPerView: "auto",
    // slidesPerGroup: 4,
    freeMode: false,
    loop: false,
    spaceBetween: 16,
    direction: "horizontal",
    slideToClickedSlide: false,
    
      // freeMode: true,
  // freeModeSticky: true,
  // freeModeMinimumVelocity: 0.4,
  // freeModeMomentumRatio: 0.28,
  // scrollbar: '.js-swiper-scrollbar',
  // scrollbarDraggable: true,
  // scrollbarHide: false,
    
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
        scrollbar: {
        el: '.swiper-scrollbar',
        draggable: true,
        dragSize: dragSize,
      },
    breakpoints: {
      1: {
        slidesPerView: "1.75",
        spaceBetween: 8,
        slidesPerGroup: 1,
      },
      750: {
        slidesPerView: "1.75",
        slidesPerGroup: 1,
      },
      990: {
        slidesPerView: "auto",
      },
    },
  });

  var swiper = new Swiper(".sim_pro_list", {
    observer: true,
    observeParents: true,
    parallax: true,
    slidesPerView: "4",
    freeMode: false,
    loop: false,
    spaceBetween: 20,
    direction: "horizontal",   
    slideToClickedSlide: false,
    navigation: {
      nextEl: ".sld_nxt",
      prevEl: ".sld_prev",
    },
    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },
    breakpoints: {
      1: {
        slidesPerView: "1",
        spaceBetween: 10,
      },
      500: {
        slidesPerView: "2",
      },
      750: {
        slidesPerView: "3",
      },
      990: {
        slidesPerView: "4",
      },
    },
  });

  var swiper = new Swiper(".inner_trust", {
    observer: true,
    observeParents: true,
    parallax: true,
    slidesPerView: "3",
    freeMode: false,
    loop: true,
    spaceBetween: 5,
    direction: "horizontal",
    slideToClickedSlide: false,
    speed: 1000,        
    autoplay: {
      delay: 3000,
    },
    breakpoints: {
      1: {
        slidesPerView: "1",
        spaceBetween: 10,
      },
      500: {
        slidesPerView: "2",
      },
      750: {
        slidesPerView: "3",
        autoplay: false,
      },
    },
  });
});

jQuery(document).ready(function () {
  $(".mmenu_item>a").click(function (e) {
    e.preventDefault();
  });

  $(".left_side .mmenu_item>a").click(function () {
    var tabid = $(this).attr("href");
    //console.log("desktop=",tabid);
    $(".mmenu_item a, div.tab-inner").removeClass("active");
    $(".tab_inner").hide();
    $(".deskside " + tabid).show();
    $(this).addClass("active");
  });

  $(".right_side .mmenu_item>a").click(function () {
    var tabid = $(this).attr("href");
    $(".mmenu_item a, div.tab-inner").removeClass("active");
    $(".tab_inner").hide();
    $(tabid).show();
    $(this).addClass("active");
  });

  $(".tabs-list>li a").click(function (e) {
    e.preventDefault();
  });

  $(".tabs-list>li").click(function () {
    var tabid = $(this).find("a").attr("href");
    $(".tabs-list>li").removeClass("active");
    $(".tab_inn").removeClass("active");
    $(".all_tab_data " + tabid).addClass("active");
    $(this).addClass("active");
  });
});

jQuery(window).on("load resize", function (e) {
  var header1 = parseFloat(jQuery(".section-header").height());
  var header2 = parseFloat(jQuery(".trust-icns").height());
  // console.log("header1", header1);
  // console.log("header2", header2);
  var header = header1 + header2;
  var windowHeight = jQuery(window).height();
  var windowWidth = jQuery(window).width();
  var myheight;

  if (windowWidth > 749) {
    myheight = windowHeight - 0;
    //jQuery(".effect-list .sidebar").css("top", header);
    jQuery(".effect-list .sidebar").css("height", myheight);
  }

  $(".ctm_menu .request_btn .header__menu-item").click(function () {
    $(".acn_submenu").addClass("openn");
  });
  $(".arrow-back svg, .header__icon .icon-close").click(function () {
    $(".acn_submenu").removeClass("openn");
  });
});


// $(function() {
//   $('a[href*=#]').on('click', function(e) {
//     e.preventDefault();
//     $('html, body').animate({ scrollTop: $($(this).attr('href')).offset().top}, 500, 'linear');
//   });
// });

$(document).ready(function() {
$(".blackarrow").click(function() {
  
    $('html,body').animate({
        scrollTop: $(".second").offset().top},
        'slow');
  
});

  
  jQuery(window).scroll(function () {
          var svalue = $(window).scrollTop();  
    //console.log(svalue);
  if ($(window).scrollTop() > 1200) {
              $(".blackarrow").addClass("show");
              
  }
  else {
              $(".blackarrow").removeClass("show");
              
  }
  });
  
  
});  


    